<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.9.1"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>ttg: Pull Terminals Design Notes</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
        <script type="text/javascript" src="jquery.smartmenus.js"></script>
        <!-- SmartMenus jQuery Bootstrap Addon -->
        <script type="text/javascript" src="jquery.smartmenus.bootstrap.js"></script>
        <!-- SmartMenus jQuery plugin -->
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">ttg 1.0.0-alpha</a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="userguide.html"><span>User&#160;Guide</span></a></li>
      <li><a href="usergroup0.html"><span>Programmer&#160;Guides</span></a></li>
      <li><a href="usergroup1.html"><span>Source&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Pull Terminals Design Notes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_dox_contrib_Pull_terminal_design_doc"></a> </p><h2>Motivation</h2>
<ul>
<li>This requirement cropped up from the wavefront example borrowed from Cpp-taskflow.</li>
<li>In TTG, every operation with different number of input dependencies is created as a separate Op.</li>
<li>However, some applications require data from various sources purely for computation, and do not necessarily imply a data dependency for execution of the task.</li>
<li>Current model of TTG only allows for data only to be PUSHed to subsequent tasks via terminals. In order to push data from different sources for computation, a 'reader' task is required which when run, instantiates all the tasks it can push data to, which is unnecessary. Tasks should be created when data dependencies are satisfied, and not when data is pushed from a source.</li>
<li>If data can be PULLed by a task when necessary, we can defer running the "reader" tasks until needed.</li>
</ul>
<h2>Prototype Implementation</h2>
<ul>
<li>Create an Op for every pull task. Use the Edges to mark terminals as pull terminals.</li>
<li>A pull Op can contain 0 or 1 pull terminals as input.</li>
<li>Key of the puller is sent as input to the pull task to invoke the task.</li>
<li>If the pull task itself has a pull terminal as input, this would walk through the DAG in a reverse manner until necessary data is pulled.</li>
<li>Invoking a pull task is done via a callback.</li>
<li>A pull task can be invoked at task creation time (eager) or when the task is ready to run with all dependencies satisfied (lazy).</li>
</ul>
<h2>Pros</h2>
<ul>
<li>Ensures unique task IDs for every pull task.</li>
</ul>
<h2>Cons</h2>
<ul>
<li>No way to map a single datasource / key to multiple keys.</li>
<li>Helps with delaying tasks, however not very flexible in design.</li>
</ul>
<h1>Design Recommendations</h1>
<h2>Use a map for pull request</h2>
<ul>
<li>Allows specifying a datasource different from the key.</li>
<li>Task keys will not be unique and currently there is no way to handle it.</li>
</ul>
<h2>Callback Model</h2>
<ul>
<li>Implement a callback for every pull terminal which takes the request (Ex. set of keys) and returns the data.</li>
<li>Data may be remote, however send currently uses a callback model and can probably be used for pull requests as well.</li>
</ul>
<h1>Use Cases</h1>
<ul>
<li>Wavefront Computation</li>
<li>Generator/Reader tasks</li>
<li>Adding 3 vectors - one vector is local and need to pull two other vectors.</li>
<li>SUMMA - pull data multiple times.</li>
</ul>
<h1>Questions</h1>
<ul>
<li>Should Pull Op be able to send data to multiple successors? Use cases?</li>
<li>Cholesky - why pull ops are needed? </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->

<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
    Generated at Mon Jun 10 2024 14:06:27 for <a href="https://https://github.com/ValeevGroup/tiledarray/">ttg</a>
    1.0.0-alpha by &#160;<a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.1
</small></address>
</body>
<script type="text/javascript" src="doxy-boot.js"></script>
</html>
